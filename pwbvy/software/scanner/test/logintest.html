<!DOCTYPE html>
<html>
<head>
   <title>BridgeIt Login Test</title>
   <script src="../src/bridgeit.js"></script>
   <script>
    var SERVICE = "http://dev.bridgeit.io";

    function handlePush()  {
        var now = new Date();
        console.log("received push " + now);
    }

    function login(username, password)  {
        
        bridgeit.useServices({
                realm:"edge",
                serviceBase:SERVICE});
        auth = bridgeit.login(username, password);
        auth.then(
            function(result){
                console.log("logged in ");
                console.log(result);
            },
            function(err){
                console.log("not logged in ");
                console.log(err);
            }
        );
        auth.then(
            function(result){
                console.log("really logged in ");
                console.log(result);
            },
            function(err){
                console.log("rats, not logged in ");
                console.log(err);
            }
        );

        bridgeit.usePushService();
        bridgeit.addPushListener(username, 'handlePush');
    }
   </script>
</head>
  
<body>

</html>

